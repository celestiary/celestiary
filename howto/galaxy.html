<!DOCTYPE html>
<html>
<head><link rel="stylesheet" href="index.css"/></head>
<body>
<div id="ui"></div>
<h1>Galaxy</h1>
Gravity particle system.  Work in progress.
<div style="width: 50%; margin: 1em auto; align: center">
  <button id="step">Step</button>
  <button id="play">Play</button>
  <button id="pause">Pause</button>
</div>
<div id="stats"/>
<script type="module">
  import Stats from './js/lib/stats.js/build/stats.module.js';

  import ThreeUi from './js/three_ui.js';
  import Galaxy from './js/Galaxy.js';


  const elt = id => document.getElementById(id);
  const uiContainer = elt('ui');
  const ui = new ThreeUi(uiContainer);
  ui.camera.position.z = 3;
  const galaxy = new Galaxy();
  ui.scene.add(galaxy);

  const stats = new Stats();
  stats.showPanel(1);
  stats.dom.style.position = 'relative';
  uiContainer.appendChild(stats.dom);
  let debug = false;
  const anim = () => {
    stats.begin();
    if (debug) {
      console.log('anim...');
    }
    galaxy.animate(debug);
    stats.end();
  };
  elt('step').onclick = anim;
  elt('play').onclick = () => {
    debug = false;
    ui.animationCb = anim;
  };
  elt('pause').onclick = () => {
    ui.animationCb = null;
    debug = true;
  };
</script>
</body>
</html>
