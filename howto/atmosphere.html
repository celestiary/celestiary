<!DOCTYPE html>
<html>
<head><link rel="stylesheet" href="index.css"/></head>
<body>
<div id="ui"></div>
<h1>Atmosphere - WIP: Terrell integration</h1>
<p>Work in progress.

<p>Integrating
  <a target="_new" href="https://github.com/wwwtyro/glsl-atmosphere">Rye Terrell's atmosphere shaders</a>.

<p>Try zooming out (mouse scroll or pad push) to see the change in eye
height.  Currently working on parameterizing the sun position and
camera look direction.

<p>See also <a href="bruneton-atmos/index.html">my attempt to integrate Eric Bruneton's shaders</a>.

<script type="module">
  import {PointLight,AxesHelper} from './js/lib/three.js/three.module.js';

  import ThreeUi from './js/three_ui.js';
  import {box} from './js/shapes.js';

  import Atmosphere from './atmosphere.js';

  const ui = new ThreeUi('ui');
  ui.camera.position.z = 10;
  const light = new PointLight();
  const dist = 1e7;
  light.position.set(dist, 0, dist);
  ui.scene.add(light);
  ui.scene.add(new AxesHelper(1.1));
  ui.scene.add(box());

  const sky = new Atmosphere(() => {
    ui.setAnimation(() => {
      const cameraPosition = ui.camera.position.clone();
      cameraPosition.applyMatrix4(ui.camera.matrixWorld);
      sky.onRender(cameraPosition);
    })});
  ui.scene.add(sky);
</script>
</body>
</html>
